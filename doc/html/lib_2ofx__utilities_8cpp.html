<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibOFX: ofx_utilities.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LibOFX
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lib_2ofx__utilities_8cpp.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lib/ofx_utilities.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Various simple functions for type conversion &amp; al.  
<a href="#details">More...</a></p>

<p><a href="lib_2ofx__utilities_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2c89f3449c0cc91f289ecbef54188d8d"><td class="memItemLeft" align="right" valign="top"><a id="a2c89f3449c0cc91f289ecbef54188d8d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DIRSEP</b>&#160;&#160;&#160;&quot;/&quot;</td></tr>
<tr class="separator:a2c89f3449c0cc91f289ecbef54188d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae7575392f9f9c464ede10057dec0e8e4"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2ofx__utilities_8cpp.html#ae7575392f9f9c464ede10057dec0e8e4">CharStringtostring</a> (const SGMLApplication::CharString source, string &amp;dest)</td></tr>
<tr class="memdesc:ae7575392f9f9c464ede10057dec0e8e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert OpenSP CharString to a C++ STL string.  <a href="#ae7575392f9f9c464ede10057dec0e8e4">More...</a><br /></td></tr>
<tr class="separator:ae7575392f9f9c464ede10057dec0e8e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b88c84b759d3058397336e7ea42c32"><td class="memItemLeft" align="right" valign="top"><a id="a50b88c84b759d3058397336e7ea42c32"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2ofx__utilities_8cpp.html#a50b88c84b759d3058397336e7ea42c32">AppendCharStringtostring</a> (const SGMLApplication::CharString source, string &amp;dest)</td></tr>
<tr class="memdesc:a50b88c84b759d3058397336e7ea42c32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append an OpenSP CharString to an existing C++ STL string. <br /></td></tr>
<tr class="separator:a50b88c84b759d3058397336e7ea42c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a94da9c925ed4850cd2d67a2d3f5ab"><td class="memItemLeft" align="right" valign="top"><a id="a47a94da9c925ed4850cd2d67a2d3f5ab"></a>
static time_t&#160;</td><td class="memItemRight" valign="bottom"><b>checked_mktime</b> (struct tm *timeptr)</td></tr>
<tr class="separator:a47a94da9c925ed4850cd2d67a2d3f5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fdbbc08f8d80a534f8db03d25316d7a"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2ofx__utilities_8cpp.html#a5fdbbc08f8d80a534f8db03d25316d7a">ofxdate_to_time_t</a> (const string ofxdate)</td></tr>
<tr class="memdesc:a5fdbbc08f8d80a534f8db03d25316d7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a C++ string containing a time in OFX format to a C time_t.  <a href="#a5fdbbc08f8d80a534f8db03d25316d7a">More...</a><br /></td></tr>
<tr class="separator:a5fdbbc08f8d80a534f8db03d25316d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfca5b423e5d7b194eb53c53f706f6ba"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2ofx__utilities_8cpp.html#abfca5b423e5d7b194eb53c53f706f6ba">ofxamount_to_double</a> (const string ofxamount)</td></tr>
<tr class="memdesc:abfca5b423e5d7b194eb53c53f706f6ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert OFX amount of money to double float.  <a href="#abfca5b423e5d7b194eb53c53f706f6ba">More...</a><br /></td></tr>
<tr class="separator:abfca5b423e5d7b194eb53c53f706f6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34933785dd934134973847e58a700733"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2ofx__utilities_8cpp.html#a34933785dd934134973847e58a700733">strip_whitespace</a> (const string para_string)</td></tr>
<tr class="memdesc:a34933785dd934134973847e58a700733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sanitize a string coming from OpenSP.  <a href="#a34933785dd934134973847e58a700733">More...</a><br /></td></tr>
<tr class="separator:a34933785dd934134973847e58a700733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a483f2a9ef7f90a49edaa1aacf44bb8c0"><td class="memItemLeft" align="right" valign="top"><a id="a483f2a9ef7f90a49edaa1aacf44bb8c0"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>get_tmp_dir</b> ()</td></tr>
<tr class="separator:a483f2a9ef7f90a49edaa1aacf44bb8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e945c824a3012017b4babd721d9f38"><td class="memItemLeft" align="right" valign="top"><a id="aa0e945c824a3012017b4babd721d9f38"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mkTempFileName</b> (const char *tmpl, char *buffer, unsigned int size)</td></tr>
<tr class="separator:aa0e945c824a3012017b4babd721d9f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Various simple functions for type conversion &amp; al. </p>

<p class="definition">Definition in file <a class="el" href="lib_2ofx__utilities_8cpp_source.html">lib/ofx_utilities.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae7575392f9f9c464ede10057dec0e8e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7575392f9f9c464ede10057dec0e8e4">&#9670;&nbsp;</a></span>CharStringtostring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string CharStringtostring </td>
          <td>(</td>
          <td class="paramtype">const SGMLApplication::CharString&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert OpenSP CharString to a C++ STL string. </p>
<p>Convert an OpenSP CharString directly to a C++ stream, to enable the use of cout directly for debugging. </p>

<p class="definition">Definition at line <a class="el" href="lib_2ofx__utilities_8cpp_source.html#l00070">70</a> of file <a class="el" href="lib_2ofx__utilities_8cpp_source.html">lib/ofx_utilities.cpp</a>.</p>

</div>
</div>
<a id="abfca5b423e5d7b194eb53c53f706f6ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfca5b423e5d7b194eb53c53f706f6ba">&#9670;&nbsp;</a></span>ofxamount_to_double()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double ofxamount_to_double </td>
          <td>(</td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>ofxamount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert OFX amount of money to double float. </p>
<p>Convert a C++ string containing an amount of money as specified by the OFX standard and convert it to a double float. </p><dl class="section note"><dt>Note</dt><dd>The ofx number format is the following: "." or "," as decimal separator, NO thousands separator. </dd></dl>

<p class="definition">Definition at line <a class="el" href="lib_2ofx__utilities_8cpp_source.html#l00230">230</a> of file <a class="el" href="lib_2ofx__utilities_8cpp_source.html">lib/ofx_utilities.cpp</a>.</p>

</div>
</div>
<a id="a5fdbbc08f8d80a534f8db03d25316d7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fdbbc08f8d80a534f8db03d25316d7a">&#9670;&nbsp;</a></span>ofxdate_to_time_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t ofxdate_to_time_t </td>
          <td>(</td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>ofxdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a C++ string containing a time in OFX format to a C time_t. </p>
<p>Converts a date from the YYYYMMDDHHMMSS.XXX[gmt offset:tz name] OFX format (see OFX 2.01 spec p.66) to a C time_t. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ofxdate</td><td>date from the YYYYMMDDHHMMSS.XXX[gmt offset:tz name] OFX format </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>C time_t in the local time zone </dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The library always returns the time in the systems local time </li>
<li>OFX defines the date up to the millisecond. The library ignores those milliseconds, since ANSI C does not handle such precision cleanly. The date provided by LibOFX is precise to the second, assuming that information this precise was provided in the ofx file. So you wont know the millisecond you were ruined...</li>
</ul>
</dd>
<dd>
DEVIATION FROM THE SPECS : The OFX specifications (both version 1.6 and 2.02) state that a client should assume that if the server returns a date without � specific time, we assume it means 0h00 GMT. As such, when we apply the local timezone and for example you are in the EST timezone, we will remove 5h, and the transaction will have occurred on the prior day! This is probably not what the bank intended (and will lead to systematic errors), but the spec is quite explicit in this respect (Ref: OFX 2.01 spec pp. 66-68)<br />
<br />
 To solve this problem (since usually a time error is relatively unimportant, but date error is), and to avoid problems in Australia caused by the behaviour in libofx up to 0.6.4, it was decided starting with 0.6.5 to use the following behavior:<br />
<br />
 -No specific time is given in the file (date only): Considering that most banks seem to be sending dates in this format represented as local time (not compliant with the specs), the transaction is assumed to have occurred 11h59 (just before noon) LOCAL TIME. This way, we should never change the date, since you'd have to travel in a timezone at least 11 hours backwards or 13 hours forward from your own to introduce mistakes. However, if you are in timezone +13 or +14, and your bank meant the data to be interpreted by the spec, you will get the wrong date. We hope that banks in those timezone will either represent in local time like most, or specify the timezone properly.<br />
<br />
 -No timezone is specified, but exact time is, the same behavior is mostly used, as many banks just append zeros instead of using the short notation. However, the time specified is used, even if 0 (midnight).<br />
<br />
 -When a timezone is specified, it is always used to properly convert in local time, following the spec. </dd></dl>

<p class="definition">Definition at line <a class="el" href="lib_2ofx__utilities_8cpp_source.html#l00131">131</a> of file <a class="el" href="lib_2ofx__utilities_8cpp_source.html">lib/ofx_utilities.cpp</a>.</p>

</div>
</div>
<a id="a34933785dd934134973847e58a700733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34933785dd934134973847e58a700733">&#9670;&nbsp;</a></span>strip_whitespace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string strip_whitespace </td>
          <td>(</td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>para_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sanitize a string coming from OpenSP. </p>
<p>Many weird caracters can be present inside a SGML element, as a result on the transfer protocol, or for any reason. This function greatly enhances the reliability of the library by zapping those gremlins (backspace,formfeed,newline,carriage return, horizontal and vertical tabs) as well as removing whitespace at the begining and end of the string. Otherwise, many problems will occur during stringmatching. </p>

<p class="definition">Definition at line <a class="el" href="lib_2ofx__utilities_8cpp_source.html#l00253">253</a> of file <a class="el" href="lib_2ofx__utilities_8cpp_source.html">lib/ofx_utilities.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="lib_2ofx__utilities_8cpp.html">ofx_utilities.cpp</a></li>
    <li class="footer">Generated on Sun Jan 3 2021 00:34:47 for LibOFX by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
